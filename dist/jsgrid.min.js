/*
 * jsGrid v1.5.3 (http://js-grid.com)
 * (c) 2023 Artem Tabalin
 * Licensed under  ()
 */


!function(t,e,i){var n,r="JSGrid",s="asc",a=function(t,i){return e.isFunction(t)?t.apply(i,e.makeArray(arguments).slice(2)):t},o={loadData:e.noop,insertItem:e.noop,updateItem:e.noop,deleteItem:e.noop};function l(t,i){var n=e(t);n.data(r,this),this._container=n,this.data=[],this.fields=[],this._editingRow=null,this._sortField=null,this._sortOrder=s,this._sortField2=null,this._sortOrder2=s,this._firstDisplayingPage=1,this._init(i),this.render()}l.prototype={width:"auto",height:"auto",updateOnResize:!0,rowClass:e.noop,rowRenderer:null,autoUpdate:!0,editOnRowClick:!1,rowClick:function(t){this.editing&&this.editOnRowClick?this._editRow(e(t.event.target).closest("tr"),e(t.event.target).closest("td").eq(0)):this.autoUpdate&&this._editingRow?this.updateItem():this.cancelEdit()},rowDoubleClick:function(t){this.editing&&!1===this.editOnRowClick?this._editRow(e(t.event.target).closest("tr"),e(t.event.target).closest("td").eq(0)):this.autoUpdate&&this._editingRow?this.updateItem():this.cancelEdit()},rowContextmenu:e.noop,noDataContent:"Not found",noDataRowClass:"jsgrid-nodata-row",heading:!0,headerRowRenderer:null,headerRowClass:"jsgrid-header-row",headerCellClass:"jsgrid-header-cell",headerTitleClass:"jsgrid-header-title",summarying:!1,summaryRowRenderer:null,summaryRowClass:"jsgrid-summary-row",summaryCellClass:"jsgrid-summary-cell",summaryContentClass:"jsgrid-summary-content",filtering:!1,filterRowRenderer:null,filterRowClass:"jsgrid-filter-row",inserting:!1,insertRowLocation:"sorted",insertRowRenderer:null,insertRowClass:"jsgrid-insert-row",contentHiddenHeaderClass:"jsgrid-content-hidden-header",contentHiddenHeaderRowClass:"jsgrid-content-hidden-header-row",contentHiddenHeaderCellClass:"jsgrid-content-hidden-header-cell",contentHiddenHeaderTitleClass:"jsgrid-content-hidden-header-title",editing:!1,editRowRenderer:null,editRowClass:"jsgrid-edit-row",confirmDeleting:!0,deleteConfirm:"Are you sure?",selecting:!0,multiSelecting:!1,lastSelectedRow:null,hoveredRowClass:"jsgrid-hovered-row",selectedRowClass:"jsgrid-selected-row",oddRowClass:"jsgrid-row",evenRowClass:"jsgrid-alt-row",cellClass:"jsgrid-cell",sorting:!1,sortableClass:"jsgrid-header-sortable",sortAscClass:"jsgrid-header-sort jsgrid-header-sort-asc",sortDescClass:"jsgrid-header-sort jsgrid-header-sort-desc",resizing:!1,resizeClass:"jsgrid-header-resize",paging:!1,pagerContainer:null,pageIndex:1,pageSize:20,pageButtonCount:15,pagerFormat:"Pages: {first} {prev} {pages} {next} {last} &nbsp;&nbsp; {pageIndex} of {pageCount}",pagePrevText:"Prev",pageNextText:"Next",pageFirstText:"First",pageLastText:"Last",pageNavigatorNextText:"...",pageNavigatorPrevText:"...",pagerContainerClass:"jsgrid-pager-container",pagerClass:"jsgrid-pager",pagerNavButtonClass:"jsgrid-pager-nav-button",pagerNavButtonInactiveClass:"jsgrid-pager-nav-inactive-button",pageClass:"jsgrid-pager-page",currentPageClass:"jsgrid-pager-current-page",customLoading:!1,pageLoading:!1,autoload:!1,controller:o,loadIndication:!0,loadIndicationDelay:500,loadMessage:"Please, wait...",loadShading:!0,invalidMessage:"Invalid data entered!",invalidNotify:function(i){var n=e.map(i.errors,function(t){return t.message||null});t.alert([this.invalidMessage].concat(n).join("\n"))},onInit:e.noop,onRefreshing:e.noop,onRefreshed:e.noop,onPageChanged:e.noop,onItemSelected:e.noop,onItemDeleting:e.noop,onItemConfirmDelete:function(e,i){if(t.confirm(a(this.deleteConfirm,this,e)))return i.apply(this)},onItemDeleted:e.noop,onItemInserting:e.noop,onItemInserted:e.noop,onItemEditing:e.noop,onItemEditCancelling:e.noop,onItemUpdating:e.noop,onItemUpdated:e.noop,onItemInvalid:e.noop,onDataLoading:e.noop,onDataLoaded:e.noop,onDataExporting:e.noop,onOptionChanging:e.noop,onOptionChanged:e.noop,onInitFilter:e.noop,onFilterChanged:e.noop,onInitFieldWidth:e.noop,onFieldWidthChanged:e.noop,onError:e.noop,invalidClass:"jsgrid-invalid",containerClass:"jsgrid",tableClass:"jsgrid-table",gridHeaderClass:"jsgrid-grid-header",gridBodyClass:"jsgrid-grid-body",gridSummaryClass:"jsgrid-grid-summary",_init:function(t){e.extend(this,t),this._initLoadStrategy(),this._initController(),this._initFields(),this._attachWindowLoadResize(),this._attachWindowResizeCallback(),this._callEventHandler(this.onInit)},loadStrategy:function(){return this.pageLoading?new jsGrid.loadStrategies.PageLoadingStrategy(this):new jsGrid.loadStrategies.DirectLoadingStrategy(this)},_initLoadStrategy:function(){this._loadStrategy=a(this.loadStrategy,this)},_initController:function(){this._controller=e.extend({},o,a(this.controller,this))},renderTemplate:function(t,e,i){var n=[];for(var r in i)n.push(i[r]);return n.unshift(t,e),void 0===(t=a.apply(null,n))||null===t?"":t},loadIndicator:function(t){return new jsGrid.LoadIndicator(t)},validation:function(t){return jsGrid.Validation&&new jsGrid.Validation(t)},_initFields:function(){var t=this;t.fields=e.map(t.fields,function(i){if(e.isPlainObject(i)){var n={columnName:(i=new(i.type&&jsGrid.fields[i.type]||jsGrid.Field)(i)).name,field:i};t._callEventHandler(t.onInitFieldWidth,n)}return i._grid=t,i});var i=new jsGrid.SpacerField;i._grid=this,t.fields.push(i)},_attachWindowLoadResize:function(){e(t).on("load",e.proxy(this._refreshSize,this))},_attachWindowResizeCallback:function(){this.updateOnResize&&e(t).on("resize",e.proxy(this._refreshSize,this))},_detachWindowResizeCallback:function(){e(t).off("resize",this._refreshSize)},option:function(t,e){var i,n;if(1===arguments.length)return this[t];i={option:t,oldValue:this[t],newValue:e},this._callEventHandler(this.onOptionChanging,i),this._handleOptionChange(i.option,i.newValue),n={option:i.option,value:i.newValue},this._callEventHandler(this.onOptionChanged,n)},fieldOption:function(t,e,i){if(t=this._normalizeField(t),2===arguments.length)return t[e];t[e]=i,this._renderGrid()},_handleOptionChange:function(t,e){switch(this[t]=e,t){case"width":case"height":this._refreshSize();break;case"rowClass":case"rowRenderer":case"rowClick":case"rowDoubleClick":case"noDataRowClass":case"noDataContent":case"selecting":case"multiSelecting":case"hoveredRowClass":case"selectedRowClass":case"oddRowClass":case"evenRowClass":this._refreshContent();break;case"pageButtonCount":case"pagerFormat":case"pagePrevText":case"pageNextText":case"pageFirstText":case"pageLastText":case"pageNavigatorNextText":case"pageNavigatorPrevText":case"pagerClass":case"pagerNavButtonClass":case"pageClass":case"currentPageClass":case"pagerRenderer":this._refreshPager();break;case"fields":this._initFields(),this.render();break;case"data":case"editing":case"heading":case"summarying":case"filtering":case"inserting":case"paging":this.refresh();break;case"loadStrategy":case"pageLoading":this._initLoadStrategy(),this.search();break;case"pageIndex":this.openPage(e);break;case"pageSize":this.refresh(),this.search();break;case"editRowRenderer":case"editRowClass":this.cancelEdit();break;case"updateOnResize":this._detachWindowResizeCallback(),this._attachWindowResizeCallback();break;case"invalidNotify":case"invalidMessage":break;default:this.render()}},destroy:function(){this._detachWindowResizeCallback(),this._clear(),this._container.removeData(r)},render:function(){return this._renderGrid(),this.autoload?this.loadData():e.Deferred().resolve().promise()},_renderGrid:function(){this._clear(),this._container.addClass(this.containerClass).css("position","relative").append(this._createHeader()).append(this._createBody()).append(this._createSummary()),this._pagerContainer=this._createPagerContainer(),this._loadIndicator=this._createLoadIndicator(),this._validation=this._createValidation(),this.refresh()},_createLoadIndicator:function(){return a(this.loadIndicator,this,{message:this.loadMessage,shading:this.loadShading,container:this._container})},_createValidation:function(){return a(this.validation,this)},_clear:function(){this.cancelEdit(),clearTimeout(this._loadingTimer),this._pagerContainer&&this._pagerContainer.empty(),this._container.empty().css({position:"",width:"",height:""})},_createHeader:function(){var t=this._headerRow=this._createHeaderRow(),i=this._filterRow=this._createFilterRow(),n=this._insertRow=this._createInsertRow(),r=e("<thead>").append(t),s=e("<tbody>").append(i).append(n),a=this._headerGrid=e("<table>").addClass(this.tableClass).append(r).append(s);return this._header=e("<div>").addClass(this.gridHeaderClass).addClass(this._scrollBarWidth()?"jsgrid-header-scrollbar":"").append(a)},_createBody:function(){var t=this._contentHeader=this._createContentHeader(),i=this._content=e("<tbody>"),n=this._bodyGrid=e("<table>").addClass(this.tableClass).append(t).append(i),r=this._body=e("<div>").addClass(this.gridBodyClass).append(n).on("contextmenu",e.proxy(function(t){if("TD"!=t.target.nodeName){var e={item:null,itemIndex:-1,event:t};return this.rowContextmenu(e),!e.cancel}},this));return!1===this.summarying&&(r.addClass(!1===this.summarying?"jsgrid-grid-body-wo-summary":""),r.on("scroll",e.proxy(function(t){this._header.scrollLeft(t.target.scrollLeft),this._body.scrollLeft(t.target.scrollLeft)},this))),r},_createSummary:function(){var t=this._summaryRow=this._createSummaryRow(),i=this._summaryGrid=e("<table>").addClass(this.tableClass).append(t);return this._summary=e("<div>").addClass(this.gridSummaryClass).addClass(this._scrollBarWidth()?"jsgrid-summary-scrollbar":"").append(i).on("scroll",e.proxy(function(t){this._header.scrollLeft(t.target.scrollLeft),this._body.scrollLeft(t.target.scrollLeft)},this))},_createPagerContainer:function(){var t=this.pagerContainer||e("<div>").appendTo(this._container);return e(t).addClass(this.pagerContainerClass)},_eachField:function(t){var i=this;e.each(this.fields,function(e,n){n.visible&&t.call(i,n,e)})},_createHeaderRow:function(){if(e.isFunction(this.headerRowRenderer))return e(this.renderTemplate(this.headerRowRenderer,this));var t=e("<tr>").addClass(this.headerRowClass);return this._eachField(function(i,n){var r=this.renderTemplate(i.headerTemplate,i),s=e("<div>").addClass(this.headerTitleClass).append(r);"string"==typeof r&&s.attr("title",i.tooltip?i.tooltip:r);var a=this._prepareCell("<th>",i,"headercss",this.headerCellClass,!0).css("width",i.width).append(s).appendTo(t);if(a.get(0).jsGridField=i,this.sorting&&i.sorting&&s.addClass(this.sortableClass).on("click",e.proxy(function(t){this.sort(n)},this)),this.resizing&&i.resizing){var o=0,l=0,d=!1,h=e.proxy(function(t){if(!0===d){var i=l+(t.clientX-o);a.css("width",i);var n=e.inArray(a.get(0).jsGridField,this.fields),r=a.parent().children().index(a);this._contentHeader.find("tr > th:eq("+r+")").css("width",i);var s=this._summary.outerHeight(!0);this._summaryGrid.find("tr > th:eq("+r+")").css("width",i),s!==this._summary.outerHeight(!0)&&this._refreshHeight(),this.fields[n].width=i}},this),u=e.proxy(function(t){if(!0===d){var i=e.inArray(a.get(0).jsGridField,this.fields);document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",u);var n={columnName:this.fields[i].name,value:this.fields[i].width};this._callEventHandler(this.onFieldWidthChanged,n),d=!1}},this),c=e('<span class="'+this.resizeClass+'">').on("mousedown",e.proxy(function(t){o=t.clientX,l=parseInt(a.outerWidth()),document.addEventListener("mousemove",h),document.addEventListener("mouseup",u),d=!0},this));a.append(c)}}),t.ready(this._initializeColumnWidth.bind(this)),t},_initializeColumnWidth(t,i){if(!0!==this._columWidthInitialized){var n=[],r=0,s=this._headerRow.innerWidth()-2*this.fields.length;if(s>0){var a=s;this._headerRow.find("th").each(function(t,i){var s=i.jsGridField,o={style:"",real:e(i).outerWidth(),min:0};s instanceof jsGrid.SpacerField?(o.style="spacer",o.real="auto",o.value=0):"auto"===i.style.width?(o.style="auto",o.value="auto",o.min=s.minWidth||0,r++):(o.value=o.real,a-=o.real),n.push(o)}.bind(this));var o=a/r;for(const t of n)"auto"===t.style&&(t.real=Math.max(o,t.real||0,t.min||0));this._headerRow.find("th").each(function(t,i){var r=i.jsGridField;r.width=n[t].real,e(i).css("width",n[t].real),this._contentHeader.find("tr > th:eq("+t+")").css("width",n[t].real),this._summaryGrid.find("tr > th:eq("+t+")").css("width",n[t].real);var s={columnName:r.name,value:r.width};this._callEventHandler(this.onFieldWidthChanged,s)}.bind(this)),this._columWidthInitialized=!0}}},_createContentHeader:function(){var t=e("<tr>").addClass(this.contentHiddenHeaderRowClass);return this._eachField(function(i,n){var r=e("<p>").addClass(this.contentHiddenHeaderTitleClass).append(this.renderTemplate(i.name,i));this._prepareCell("<th>",i,"headercss",this.contentHiddenHeaderCellClass,!0).css("width",i.width).append(r).appendTo(t)}),e("<thead>").addClass(this.contentHiddenHeaderClass).append(t)},_createSummaryRow:function(){if(e.isFunction(this.summaryRowRenderer))return e(this.renderTemplate(this.summaryRowRenderer,this));var t=e("<tr>").addClass(this.summaryRowClass),i=e("<thead>").append(t);return this._eachField(function(i,n){var r=e("<div>").addClass(this.summaryContentClass).append(this.renderTemplate(i.summaryTemplate,i));this._prepareCell("<th>",i,"headercss",this.summaryCellClass,!0).append(r).appendTo(t)}),i},_prepareCell:function(t,i,n,r,s){return(!0===s?e(t).css("width",i.width):e(t)).addClass(r||this.cellClass).addClass(i.readOnly?"readonly":"").addClass(n&&i[n]||i.css).addClass(i.align?"jsgrid-align-"+i.align:"")},_createFilterRow:function(){if(e.isFunction(this.filterRowRenderer))return e(this.renderTemplate(this.filterRowRenderer,this));var t=e("<tr>").addClass(this.filterRowClass);return this._eachField(function(e){this._prepareCell("<td>",e,"filtercss").append(this.renderTemplate(e.filterTemplate,e)).appendTo(t)}),t},_createInsertRow:function(){if(e.isFunction(this.insertRowRenderer))return e(this.renderTemplate(this.insertRowRenderer,this));var t=e("<tr>").addClass(this.insertRowClass);return this._eachField(function(e){this._prepareCell("<td>",e,"insertcss").append(this.renderTemplate(e.insertTemplate,e)).appendTo(t)}),t},_callEventHandler:function(t,i){return t.call(this,e.extend(i,{grid:this})),i},reset:function(){return this._resetPager(),this._loadStrategy.reset()},_resetPager:function(){this._firstDisplayingPage=1,this._setPage(1)},_resetSorting:function(){this._sortField=null,this._sortOrder=s,this._sortField2=null,this._sortOrder2=s,this._clearSortingCss()},refresh:function(){this._callEventHandler(this.onRefreshing),this.cancelEdit(),this._refreshHeading(),this._refreshFiltering(),this._refreshInserting(),this._refreshSummarying(),this._refreshContent(),this._refreshPager(),this._refreshSize(),this._setSortingCss(),this._callEventHandler(this.onRefreshed)},_refreshHeading:function(){this._headerRow.toggle(this.heading)},_refreshFiltering:function(){this._filterRow.toggle(this.filtering)},_refreshInserting:function(){this._insertRow.toggle(this.inserting)},_refreshSummarying:function(){if(this.summarying?this._summary.removeClass("jsgrid-hidden-summary"):this._summary.addClass("jsgrid-hidden-summary"),this.summarying&&this.data.length){var t=this._loadStrategy.firstDisplayIndex(),e=this._loadStrategy.lastDisplayIndex(),i=this.data.slice(t,e);this._eachField(function(t){var e={values:i.map(function(e){return e[t.name]})};this.renderTemplate(t.summaryValue,t,e)})}},_refreshContent:function(){this.lastSelectedRow=null;var t=this._content;if(t.empty(),!this.data.length)return t.append(this._createNoDataRow()),this;for(var e=this._loadStrategy.firstDisplayIndex(),i=this._loadStrategy.lastDisplayIndex(),n=e;n<i;n++){var r=this.data[n];t.append(this._createRow(r,n))}void 0!==t.tooltip&&null!==t.tooltip&&t.tooltip({relative:!0,items:"td",position:{my:"left top",at:"right bottom",collision:"none"}})},_createNoDataRow:function(){var t=0;return this._eachField(function(){t++}),e("<tr>").addClass(this.noDataRowClass).append(e("<td>").addClass(this.cellClass).attr("colspan",t).append(this.renderTemplate(this.noDataContent,this)))},_createRow:function(t,i){var n;return e.isFunction(this.rowRenderer)?n=this.renderTemplate(this.rowRenderer,this,{item:t,itemIndex:i}):(n=e("<tr>"),this._renderCells(n,t)),n.addClass(this._getRowClasses(t,i)).data("JSGridItem",t).on("click",e.proxy(function(r){var s={item:t,itemIndex:i,event:r};if(this.rowClick(s),!s.cancel&&this.selecting){var a=this.data.filter(function(e){return e.selected&&e!==t});if(this.multiSelecting&&(r.ctrlKey||r.shiftKey))if(r.shiftKey&&this.lastSelectedRow){a=this.data.filter(function(t){return t.selected});for(var o=this._content.find("tr"),l=o.index(this.lastSelectedRow),d=o.index(n),h=Math.min(l,d),u=Math.max(l,d),c=[],f=h;f<=u;f++){var p=o.get(f);e(p).removeClass(this.hoveredRowClass);var g=e(p).data("JSGridItem");e(p).addClass(this.selectedRowClass),g.selected||c.push(g),g.selected=!0;var m=a.indexOf(g);m>-1&&a.splice(m,1)}for(f=0;f<a.length;f++){this.rowByItem(a[f]).removeClass(this.selectedRowClass),a[f].selected=!1}this.onItemSelected(c,a)}else r.ctrlKey&&(n.removeClass(this.hoveredRowClass),n.toggleClass(this.selectedRowClass),t.selected?(t.selected=!1,this.onItemSelected([],[t])):(t.selected=!0,this.onItemSelected([t],[]))),this.lastSelectedRow=n;else a.forEach(function(t){t.selected=!1,this.rowByItem(t).removeClass(this.selectedRowClass)}.bind(this)),t.selected?a.length>0&&this.onItemSelected([],a):(n.removeClass(this.hoveredRowClass),n.toggleClass(this.selectedRowClass),t.selected=!0,this.onItemSelected([t],a)),this.lastSelectedRow=n}},this)).on("dblclick",e.proxy(function(e){this.rowDoubleClick({item:t,itemIndex:i,event:e})},this)).on("contextmenu",e.proxy(function(e){var n={item:t,itemIndex:i,event:e};return this.rowContextmenu(n),!n.cancel},this)),t.selected&&n.addClass(this.selectedRowClass),this.selecting&&this._attachRowHover(n),n},_getRowClasses:function(t,e){var i=[];return i.push((e+1)%2?this.oddRowClass:this.evenRowClass),i.push(a(this.rowClass,this,t,e)),i.join(" ")},_attachRowHover:function(t){var i=this.hoveredRowClass;t.hover(function(){t.data("JSGridItem").selected||e(this).addClass(i)},function(){e(this).removeClass(i)})},_renderCells:function(t,e){return this._eachField(function(i){t.append(this._createCell(e,i))}),this},_createCell:function(t,i){var n,r=this._getItemFieldValue(t,i),s={value:r,item:t};return e.isFunction(i.cellRenderer)?n=this.renderTemplate(i.cellRenderer,i,s):(r=this.renderTemplate(i.itemTemplate||r,i,s),n=e("<td>").append(r)),"string"!=typeof r&&"number"!=typeof r&&"boolean"!=typeof r||n.attr("title",r.toString()),this._prepareCell(n,i)},_getItemFieldValue:function(t,e){for(var i=e.name.split("."),n=t[i.shift()];n&&i.length;)n=n[i.shift()];return n},_setItemFieldValue:function(t,e,i){for(var n=e.name.split("."),r=t,s=n[0];r&&n.length;)r=(t=r)[s=n.shift()];if(!r)for(;n.length;)t=t[s]={},s=n.shift();t[s]=i},sort:function(t,i,n,r){return e.isPlainObject(t)&&(i=t.order,t=t.field),void 0!==n&&e.isPlainObject(n)&&(r=n.order,n=n.field),this._clearSortingCss(),this._setSortingParams(t,i,n,r),this._setSortingCss(),this._loadStrategy.sort()},_clearSortingCss:function(){this._headerRow.find("th").removeClass(this.sortAscClass).removeClass(this.sortDescClass)},_setSortingParams:function(t,e,i,n){t=this._normalizeField(t),e=e||(this._sortField===t?this._reversedSortOrder(this._sortOrder):s),void 0!==i&&void 0!==n&&(i=this._normalizeField(i),n=n||(this._sortField2===i?this._reversedSortOrder(this._sortOrder2):s)),this._sortField=t,this._sortOrder=e,void 0!==i&&void 0!==n?(this._sortField2=i,this._sortOrder2=n):(this._sortField2=null,this._sortOrder2=s)},_normalizeField:function(t){return e.isNumeric(t)?this.fields[t]:"string"==typeof t?e.grep(this.fields,function(e){return e.name===t})[0]:t},_reversedSortOrder:function(t){return t===s?"desc":s},_setSortingCss:function(){var t=this._visibleFieldIndex(this._sortField);this._headerRow.find("th").eq(t).addClass(this._sortOrder===s?this.sortAscClass:this.sortDescClass)},_visibleFieldIndex:function(t){return e.inArray(t,e.grep(this.fields,function(t){return t.visible}))},_sortData:function(){var t=this._sortFactor(),e=this._sortField,i=this._sortFactor2(),n=this._sortField2;e&&this.data.sort(function(r,s){var a=t*e.sortingFunc(r[e.name],s[e.name]);return 0==a&&void 0!==n&&null!==n?i*n.sortingFunc(r[n.name],s[n.name]):a})},_sortFactor:function(){return this._sortOrder===s?1:-1},_sortFactor2:function(){return this._sortOrder2===s?1:-1},_itemsCount:function(){return this._loadStrategy.itemsCount()},_pagesCount:function(){var t=this._itemsCount(),e=this.pageSize;return Math.floor(t/e)+(t%e?1:0)},_refreshPager:function(){var t=this._pagerContainer;t.empty(),this.paging&&t.append(this._createPager());var e=this.paging&&this._pagesCount()>1;t.toggle(e)},_createPager:function(){var t;return(t=e.isFunction(this.pagerRenderer)?e(this.pagerRenderer({pageIndex:this.pageIndex,pageCount:this._pagesCount()})):e("<div>").append(this._createPagerByFormat())).addClass(this.pagerClass),t},_createPagerByFormat:function(){var t=this.pageIndex,i=this._pagesCount(),n=this._itemsCount(),r=this.pagerFormat.split(" ");return e.map(r,e.proxy(function(r){var s=r;return"{pages}"===r?s=this._createPages():"{first}"===r?s=this._createPagerNavButton(this.pageFirstText,1,t>1):"{prev}"===r?s=this._createPagerNavButton(this.pagePrevText,t-1,t>1):"{next}"===r?s=this._createPagerNavButton(this.pageNextText,t+1,t<i):"{last}"===r?s=this._createPagerNavButton(this.pageLastText,i,t<i):"{pageIndex}"===r?s=t:"{pageCount}"===r?s=i:"{itemCount}"===r&&(s=n),e.isArray(s)?s.concat([" "]):[s," "]},this))},_createPages:function(){var t=this._pagesCount(),e=this.pageButtonCount,i=this._firstDisplayingPage,n=[];i>1&&n.push(this._createPagerPageNavButton(this.pageNavigatorPrevText,this.showPrevPages));for(var r=0,s=i;r<e&&s<=t;r++,s++)n.push(s===this.pageIndex?this._createPagerCurrentPage():this._createPagerPage(s));return i+e-1<t&&n.push(this._createPagerPageNavButton(this.pageNavigatorNextText,this.showNextPages)),n},_createPagerNavButton:function(t,i,n){return this._createPagerButton(t,this.pagerNavButtonClass+(n?"":" "+this.pagerNavButtonInactiveClass),n?function(){this.openPage(i)}:e.noop)},_createPagerPageNavButton:function(t,e){return this._createPagerButton(t,this.pagerNavButtonClass,e)},_createPagerPage:function(t){return this._createPagerButton(t,this.pageClass,function(){this.openPage(t)})},_createPagerButton:function(t,i,n){var r=e("<a>").attr("href","javascript:void(0);").html(t).on("click",e.proxy(n,this));return e("<span>").addClass(i).append(r)},_createPagerCurrentPage:function(){return e("<span>").addClass(this.pageClass).addClass(this.currentPageClass).text(this.pageIndex)},_refreshSize:function(){this._refreshHeight(),this._refreshWidth(),this._initializeColumnWidth()},_refreshWidth:function(){var t="auto"===this.width?this._getAutoWidth():this.width;this._container.width(t)},_getAutoWidth:function(){var t=this._headerGrid,e=this._header;t.width("auto");var i=t.outerWidth(),n=e.outerWidth()-e.innerWidth();return t.width(""),i+n},_scrollBarWidth:function(){if(void 0===n){var t=e("<div style='width:50px;height:50px;overflow:hidden;position:absolute;top:-10000px;left:-10000px;'></div>"),i=e("<div style='height:100px;'></div>");t.append(i).appendTo("body");var r=i.innerWidth();t.css("overflow-y","auto");var s=i.innerWidth();t.remove(),n=r-s}return n},_refreshHeight:function(){var t,e=this._container,i=this._summary,n=this._pagerContainer,r=this.height;e.height(r),"auto"!==r&&(r=e.height(),t=this._header.outerHeight(!0),i.parents(e).length&&(t+=i.outerHeight(!0)),n.parents(e).length&&(t+=n.outerHeight(!0)),this._body.outerHeight(r-t))},showPrevPages:function(){var t=this._firstDisplayingPage,e=this.pageButtonCount;this._firstDisplayingPage=t>e?t-e:1,this._refreshPager()},showNextPages:function(){var t=this._firstDisplayingPage,e=this.pageButtonCount,i=this._pagesCount();this._firstDisplayingPage=t+2*e>i?i-e+1:t+e,this._refreshPager()},openPage:function(t){t<1||t>this._pagesCount()||(this._setPage(t),this._loadStrategy.openPage(t))},_setPage:function(t){var e=this._firstDisplayingPage,i=this.pageButtonCount;this.pageIndex=t,t<e&&(this._firstDisplayingPage=t),t>e+i-1&&(this._firstDisplayingPage=t-i+1),this._callEventHandler(this.onPageChanged,{pageIndex:t})},_controllerCall:function(t,i,n,r){if(n)return e.Deferred().reject().promise();this._showLoading();var s,a,o=this._controller;if(!o||!o[t])throw Error("controller has no method '"+t+"'");return(s=o[t](i),a=e.Deferred(),s&&s.then?s.then(function(){a.resolve.apply(a,arguments)},function(){a.reject.apply(a,arguments)}):a.resolve(s),a.promise()).done(e.proxy(r,this)).fail(e.proxy(this._errorHandler,this)).always(e.proxy(this._hideLoading,this))},_errorHandler:function(){this._callEventHandler(this.onError,{args:e.makeArray(arguments)})},_showLoading:function(){this.loadIndication&&(clearTimeout(this._loadingTimer),this._loadingTimer=setTimeout(e.proxy(function(){this._loadIndicator.show()},this),this.loadIndicationDelay))},_hideLoading:function(){this.loadIndication&&(clearTimeout(this._loadingTimer),this._loadIndicator.hide())},search:function(t){return this._resetPager(),this.loadData(t)},loadData:function(t){t=t||(this.filtering?this.getFilter():{}),e.extend(t,this._loadStrategy.loadParams(),this._sortingParams());var i=this._callEventHandler(this.onDataLoading,{filter:t});return this._controllerCall("loadData",t,i.cancel,function(t){t&&(this._loadStrategy.finishLoad(t),this._callEventHandler(this.onDataLoaded,{data:t}))})},exportData:function(t){var e=t||{},i=e.type||"csv",n="";switch(this._callEventHandler(this.onDataExporting),i){case"csv":n=this._dataToCsv(e)}return n},_dataToCsv:function(t){var e=!(t=t||{}).hasOwnProperty("includeHeaders")||t.includeHeaders,i=t.subset||"all",n=t.filter||void 0,r=[];if(e){for(var s=this.fields.length,a={},o=0;o<s;o++){var l=this.fields[o];"includeInDataExport"in l&&!0===l.includeInDataExport&&(a[o]=l.title||l.name)}var d=this._itemToCsv(a,{},t);r.push(d)}var h=0,u=this.data.length;switch(i){case"visible":h=(u=this._firstDisplayingPage*this.pageSize)-this.pageSize}for(o=h;o<u;o++){var c=this.data[o],f="",p=!0;n&&(n(c)||(p=!1)),p&&(f=this._itemToCsv(c,this.fields,t),r.push(f))}return r.join("")},_itemToCsv:function(t,i,n){var r=(n=n||{}).delimiter||"|",s=!n.hasOwnProperty("encapsulate")||n.encapsulate,a=n.newline||"\r\n",o=n.transforms||{},l=(i=i||{},this._getItemFieldValue),d=[];return Object.keys(t).forEach(function(n,r){var a="";if(i.length>0){var h=i[r];if("includeInDataExport"in h){if(!h.includeInDataExport)return;if("select"===h.type){var u=l(t,h);a=(e.grep(h.items,function(t,e){return t[h.valueField]===u})[0]||"")[h.textField]}else a=l(t,h)}else a=l(t,h);o.hasOwnProperty(h.name)&&(a=o[h.name](a))}else a=t[n];s&&(a='"'+a+'"'),d.push(a)}),d.join(r)+a},getSelectedItems:function(){return this.data.filter(function(t){return t.selected})},_scrollToView:function(t,i){t=e(t),i=e(i);var n=t.offset().top+i.scrollTop(),r=t.innerHeight(),s=n+r;if(!t.is(":visible")){t.css({visibility:"hidden"}).show();n=t.offset().top;t.css({visibility:"",display:""})}var a=i.scrollTop(),o=a+i.innerHeight();return n-r<a?(i.animate({scrollTop:n-r},600),!1):!(s>o)||(i.animate({scrollTop:i.scrollTop()+s-o},600),!1)},setSelectedItems:function(t){if(this.getSelectedItems().forEach(function(t){t.selected=!1,this.rowByItem(t).removeClass(this.selectedRowClass)}.bind(this)),t.length<=1||this.multiSelecting&&t.length>1){var e=0;t.forEach(function(t){t.selected=!0;let i=this.rowByItem(t);i.addClass(this.selectedRowClass),0==e&&this._scrollToView(i,this._body),e++}.bind(this))}},getFilter:function(){var t={};return this._eachField(function(e){e.filtering&&this._setItemFieldValue(t,e,e.filterValue())}),t},_sortingParams:function(){var t={};return this.sorting&&this._sortField&&(t.sortField=this._sortField,t.sortFieldName=this._sortField.name,t.sortOrder=this._sortOrder,t.sortFactor=this._sortFactor()),this.sorting&&this._sortField2&&(t.sortField2=this._sortField2,t.sortFieldName2=this._sortField2.name,t.sortOrder2=this._sortOrder2,t.sortFactor2=this._sortFactor2()),t},getSorting:function(){var t=this._sortingParams(),e={field:t.sortFieldName,order:t.sortOrder};return t.sortField2&&(e.field2=t.sortFieldName2,e.order2=t.sortOrder2),e},clearFilter:function(t){if(this._eachField(function(t){t.filtering&&t.setFilterValue(void 0)}),t)return this.search()},insertItem:function(t){var i=t||this._getValidatedInsertItem();if(!i)return e.Deferred().reject().promise();var n=this._callEventHandler(this.onItemInserting,{item:i});return this._controllerCall("insertItem",i,n.cancel,function(t){t=t||i,this._loadStrategy.finishInsert(t,this.insertRowLocation),this._callEventHandler(this.onItemInserted,{item:t}),this._refreshSummarying()})},_getValidatedInsertItem:function(){var t=this._getInsertItem();return this._validateItem(t,this._insertRow)?t:null},_getInsertItem:function(){var t={};return this._eachField(function(e){e.inserting&&this._setItemFieldValue(t,e,e.insertValue())}),t},_validateItem:function(t,i){var n=[],r={item:t,itemIndex:this._rowIndex(i),row:i};if(this._eachField(function(s){if(s.validate&&(i!==this._insertRow||s.inserting)&&(i!==this._getEditRow()||s.editing)){var a=this._getItemFieldValue(t,s),o=this._validation.validate(e.extend({value:a,rules:s.validate,name:s.title?s.title:s.name},r));this._setCellValidity(i.children().eq(this._visibleFieldIndex(s)),o),o.length&&n.push.apply(n,e.map(o,function(t){return{field:s,message:t}}))}}),!n.length)return!0;var s=e.extend({errors:n},r);return this._callEventHandler(this.onItemInvalid,s),this.invalidNotify(s),!1},_setCellValidity:function(t,e){t.toggleClass(this.invalidClass,!!e.length).attr("title",e.join("\n"))},clearInsert:function(){var t=this._createInsertRow();this._insertRow.replaceWith(t),this._insertRow=t,this.refresh()},editItem:function(t){var e=this.rowByItem(t);e.length&&this._editRow(e)},rowByItem:function(t){return t.jquery||t.nodeType?e(t):this._content.find("tr").filter(function(){return e.data(this,"JSGridItem")===t})},_editRow:function(t,e){if(this.editing){var i=t.data("JSGridItem");if(!this._callEventHandler(this.onItemEditing,{row:t,item:i,itemIndex:this._itemIndex(i)}).cancel){this._editingRow&&this.cancelEdit();var n=this._createEditRow(i);if(n.css("outline",0).attr("tabindex",-1),n.on("keyup",function(t){27==t.keyCode&&this.cancelEdit()}.bind(this)),this._editingRow=t,t.hide(),n.insertBefore(t),e){var r=t.find("td").index(e.eq(0)),s=n.eq(0).focus().find("td").eq(r);s.find("input").length>0?s.find("input").focus():s.find("button").length>0?s.find("button").focus():s.find("select").length>0&&s.find("select").focus()}else n.eq(0).focus().find("td").eq(0).find("input").focus();t.data("JSGridEditRow",n);document.activeElement}}},_createEditRow:function(t){if(e.isFunction(this.editRowRenderer))return e(this.renderTemplate(this.editRowRenderer,this,{item:t,itemIndex:this._itemIndex(t)}));var i=e("<tr>").addClass(this.editRowClass);return this._eachField(function(e){var n=this._getItemFieldValue(t,e);this._prepareCell("<td>",e,"editcss").append(this.renderTemplate(e.editTemplate||"",e,{value:n,item:t})).appendTo(i)}),i},updateItem:function(t,e){1===arguments.length&&(e=t);var i=t?this.rowByItem(t):this._editingRow;if(e=e||this._getValidatedEditedItem())return this._updateRow(i,e)},_getValidatedEditedItem:function(){var t=this._getEditedItem();return this._validateItem(t,this._getEditRow())?t:null},_updateRow:function(t,i){var n=t.data("JSGridItem"),r=this._itemIndex(n),s=e.extend(!0,{},n,i),a=this._callEventHandler(this.onItemUpdating,{row:t,item:s,itemIndex:r,previousItem:n});return this._controllerCall("updateItem",s,a.cancel,function(i){var a=e.extend(!0,{},n);s=i||e.extend(!0,n,s);var o=this._finishUpdate(t,s,r);this._callEventHandler(this.onItemUpdated,{row:o,item:s,itemIndex:r,previousItem:a}),this._refreshSummarying()})},_rowIndex:function(t){return this._content.children().index(e(t))},_itemIndex:function(t){return e.inArray(t,this.data)},_finishUpdate:function(t,e,i){this.cancelEdit(),this.data[i]=e;var n=this._createRow(e,i);return t.replaceWith(n),n},_getEditedItem:function(){var t={};return this._eachField(function(e){e.editing&&this._setItemFieldValue(t,e,e.editValue())}),t},cancelEdit:function(){if(this._editingRow){var t=this._editingRow,e=t.data("JSGridItem"),i=this._itemIndex(e);this._callEventHandler(this.onItemEditCancelling,{row:t,item:e,itemIndex:i}),this._getEditRow().remove(),this._editingRow.show(),this._editingRow=null}},_getEditRow:function(){return this._editingRow&&this._editingRow.data("JSGridEditRow")},deleteItem:function(t){var e=this.rowByItem(t);if(e.length)return this.confirmDeleting?this.onItemConfirmDelete.apply(this,[e.data("JSGridItem"),function(){this._deleteRow(e)}.bind(this)]):this._deleteRow(e)},_deleteRow:function(t){var e=t.data("JSGridItem"),i=this._itemIndex(e),n=this._callEventHandler(this.onItemDeleting,{row:t,item:e,itemIndex:i});return this._controllerCall("deleteItem",e,n.cancel,function(){this._loadStrategy.finishDelete(e,this._itemIndex(e)),this._callEventHandler(this.onItemDeleted,{row:t,item:e,itemIndex:i}),this._refreshSummarying()})}},e.fn.jsGrid=function(t){var i=e.makeArray(arguments).slice(1),n=this;return this.each(function(){var s,a=e(this),o=a.data(r);if(o)if("string"==typeof t){if(void 0!==(s=o[t].apply(o,i))&&s!==o)return n=s,!1}else o._detachWindowResizeCallback(),o._init(t),o.render();else new l(a,t)}),n};var d={},h={},u=function(t,i){e.each(i,function(i,n){if(t){if(e.isPlainObject(n))return void u(t[i]||t[i[0].toUpperCase()+i.slice(1)],n);t.hasOwnProperty(i)?t[i]=n:t.prototype[i]=n}})};t.jsGrid={Grid:l,fields:d,fieldsClasses:{button:"",checkbox:"",input:"",select:"",text:"",textarea:""},setDefaults:function(t){var i;e.isPlainObject(t)?i=l.prototype:(i=d[t].prototype,t=arguments[1]||{}),e.extend(i,t)},locales:h,locale:function(t){t=t.replace("-","_").toLowerCase();var i=e.isPlainObject(t)?t:h[t];if(!i)throw Error("unknown locale "+t);u(jsGrid,i)},version:"1.5.3"}}(window,jQuery),function(t,e,i){function n(t){this._init(t)}n.prototype={container:"body",message:"Loading...",shading:!0,zIndex:1e3,shaderClass:"jsgrid-load-shader",loadPanelClass:"jsgrid-load-panel",_init:function(t){e.extend(!0,this,t),this._initContainer(),this._initShader(),this._initLoadPanel()},_initContainer:function(){this._container=e(this.container)},_initShader:function(){this.shading&&(this._shader=e("<div>").addClass(this.shaderClass).hide().css({position:"absolute",top:0,right:0,bottom:0,left:0,zIndex:this.zIndex}).appendTo(this._container))},_initLoadPanel:function(){this._loadPanel=e("<div>").addClass(this.loadPanelClass).text(this.message).hide().css({position:"absolute",top:"50%",left:"50%",zIndex:this.zIndex}).appendTo(this._container)},show:function(){var t=this._loadPanel.show(),e=t.outerWidth(),i=t.outerHeight();t.css({marginTop:-i/2,marginLeft:-e/2}),this._shader.show()},hide:function(){this._loadPanel.hide(),this._shader.hide()}},t.LoadIndicator=n}(jsGrid,jQuery),function(t,e,i){function n(t){this._grid=t}function r(t){this._grid=t,this._itemsCount=0}n.prototype={firstDisplayIndex:function(){var t=this._grid;return t.option("paging")?(t.option("pageIndex")-1)*t.option("pageSize"):0},lastDisplayIndex:function(){var t=this._grid,e=t.option("data").length;return t.option("paging")?Math.min(t.option("pageIndex")*t.option("pageSize"),e):e},itemsCount:function(){return this._grid.option("data").length},openPage:function(t){this._grid.refresh()},loadParams:function(){return{}},sort:function(){return this._grid._sortData(),this._grid.refresh(),e.Deferred().resolve().promise()},reset:function(){return this._grid.refresh(),e.Deferred().resolve().promise()},finishLoad:function(t){var e=this._grid._sortFactor(),i=this._grid._sortField,n=this._grid._sortFactor2(),r=this._grid._sortField2;i&&t.sort(function(t,s){var a=e*i.sortingFunc(t[i.name],s[i.name]);return 0==a&&void 0!==r&&null!==r?n*r.sortingFunc(t[r.name],s[r.name]):a}),this._grid.option("data",t)},finishInsert:function(t,e){var i=this._grid;switch(e){case"top":i.option("data").unshift(t);break;case"bottom":i.option("data").push(t);default:i._sortFactor();var n=i._sortField;if(void 0!==n&&null!==n){var r=this.binaryFind(t,i.option("data"));r.found?i.option("data").splice(r.index+1,0,t):i.option("data").splice(r.index,0,t)}else i.option("data").push(t)}i.refresh()},binaryFind:function(t,e){for(var i,n,r=this._grid,s=r._sortFactor(),a=r._sortField,o=r._sortFactor2(),l=r._sortField2,d=function(t,e){var i=s*a.sortingFunc(t?t[a.name]:null,e?e[a.name]:null);return 0==i&&void 0!==l&&null!==l?o*l.sortingFunc(t?t[l.name]:null,e?e[l.name]:null):i},h=0,u=e.length-1;h<=u;){var c=d(t,n=e[i=(h+u)/2|0]);if(c>0)h=i+1;else{if(!(c<0))return{found:!0,index:i};u=i-1}}return{found:!1,index:d(t,n)>0?i+1:i}},finishDelete:function(t,e){var i=this._grid;e>-1&&(i.option("data").splice(e,1),i.reset())}},r.prototype={firstDisplayIndex:function(){return 0},lastDisplayIndex:function(){return this._grid.option("data").length},itemsCount:function(){return this._itemsCount},openPage:function(t){this._grid.loadData()},loadParams:function(){var t=this._grid;return{pageIndex:t.option("pageIndex"),pageSize:t.option("pageSize")}},reset:function(){return this._grid.loadData()},sort:function(){return this._grid.loadData()},finishLoad:function(t){this._itemsCount=t.itemsCount,this._grid.option("data",t.data)},finishInsert:function(t){this._grid.search()},finishDelete:function(t,e){this._grid.search()}},t.loadStrategies={DirectLoadingStrategy:n,PageLoadingStrategy:r}}(jsGrid,jQuery),function(t,e,i){var n=function(t){return void 0!==t&&null!==t},r={string:function(t,e){return n(t)||n(e)?n(t)?n(e)?(""+t).localeCompare(""+e):1:-1:0},number:function(t,e){return t||e?t?e?t-e:1:-1:0},date:function(t,e){return t||e?t?e?t-e:1:-1:0},numberAsString:function(t,e){return parseFloat(t)-parseFloat(e)}};t.sortStrategies=r}(jsGrid,jQuery),function(t,e,i){function n(t){this._init(t)}n.prototype={_init:function(t){e.extend(!0,this,t)},validate:function(t){var i=[];return e.each(this._normalizeRules(t.rules),function(n,r){if(!r.validator(t.value,t.item,r.param)){var s=e.isFunction(r.message)?r.message(t.value,t.item):r.message.replace("{name}",t.name);i.push(s)}}),i},_normalizeRules:function(t){return e.isArray(t)||(t=[t]),e.map(t,e.proxy(function(t){return this._normalizeRule(t)},this))},_normalizeRule:function(t){if("string"==typeof t&&(t={validator:t}),e.isFunction(t)&&(t={validator:t}),!e.isPlainObject(t))throw Error("wrong validation config specified");return t=e.extend({},t),e.isFunction(t.validator)?t:this._applyNamedValidator(t,t.validator)},_applyNamedValidator:function(t,i){delete t.validator;var n=r[i];if(!n)throw Error('unknown validator "'+i+'"');return e.isFunction(n)&&(n={validator:n}),e.extend({},n,t)}},t.Validation=n;var r={required:{message:"Field '{name}' is required",validator:function(t){return void 0!==t&&null!==t&&""!==t}},rangeLength:{message:"Field '{name}' value length is out of the defined range",validator:function(t,e,i){return t.length>=i[0]&&t.length<=i[1]}},minLength:{message:"Field '{name}' value is too short",validator:function(t,e,i){return t.length>=i}},maxLength:{message:"Field '{name}' value is too long",validator:function(t,e,i){return t.length<=i}},pattern:{message:"Field '{name}' value is not matching the defined pattern",validator:function(t,e,i){return"string"==typeof i&&(i=new RegExp("^(?:"+i+")$")),i.test(t)}},range:{message:"Field '{name}' value is out of the defined range",validator:function(t,e,i){return t>=i[0]&&t<=i[1]}},min:{message:"Field '{name}' value is too small",validator:function(t,e,i){return t>=i}},max:{message:"Field '{name}' value is too large",validator:function(t,e,i){return t<=i}}};t.validators=r}(jsGrid,jQuery),function(t,e,i){function n(t){e.extend(!0,this,t),this.sortingFunc=this._getSortingFunc()}n.prototype={name:"",title:null,tooltip:null,css:"",align:"",width:100,visible:!0,filtering:!0,inserting:!0,editing:!0,sorting:!0,resizing:!0,sorter:"string",defaultValue:void 0,editable:!0,editableFlagField:"",summaryControl:null,totalLabel:"Total",rowsLabel:"rows",emptyLabel:"Empty",includeInDataExport:!0,headerTemplate:function(){return void 0===this.title||null===this.title?this.name:this.title},itemTemplate:function(t,e){return t},filterTemplate:function(){return""},insertTemplate:function(){return""},editTemplate:function(t,e){return this._value=t,this.itemTemplate(t,e)},summaryTemplate:function(){return this.summaryControl=e("<div>").append(void 0===this.title||null===this.title?this.name:this.title),this.summaryControl},filterValue:function(){return""},setFilterValue:function(t){},insertValue:function(){return""},editValue:function(){return this._value},summaryValue:function(t){var e=t.filter(t=>void 0===t||null===t||""===t),i=this.emptyLabel+": "+e.length+" "+this.rowsLabel;this.summaryControl.html(i),this.summaryControl.attr("title",i)},_getSortingFunc:function(){var i=this.sorter;if(e.isFunction(i))return i;if("string"==typeof i)return t.sortStrategies[i];throw Error('wrong sorter for the field "'+this.name+'"!')}},t.Field=n,t.fields=n}(jsGrid,jQuery),function(t,e,i){var n=t.Field;function r(t){n.call(this,t)}r.prototype=new n({extendedFilter:!0,autosearch:!0,readOnly:!1,filter_placeholder:"Input a string to filter...",insert_placeholder:"Input a string to insert...",edit_placeholder:"Input a string to edit...",filterTemplate:function(){if(!this.filtering)return"";var t=this._grid,e=this.filterControl=this._createTextBox();e.attr("placeholder",this.filter_placeholder),e.attr("title",this.filter_placeholder);var i={columnName:this.name,field:this};return t._callEventHandler(t.onInitFilter,i),this.autosearch&&e.on("input",function(e){var i={columnName:this.name,value:this.filterControl.val()};t._callEventHandler(t.onFilterChanged,i),t.search()}.bind(this)),e},insertTemplate:function(){if(!this.inserting)return"";var t=this.insertControl=this._createTextBox();return t.attr("placeholder",this.insert_placeholder),t.attr("title",this.insert_placeholder),!1===this.editable&&t.attr("readonly",!0),void 0!==this.defaultValue&&t.val(this.defaultValue),t},editTemplate:function(t,e){if(!this.editing)return this.itemTemplate.apply(this,arguments);var i=this.editControl=this._createTextBox();return i.attr("placeholder",this.edit_placeholder),i.attr("title",this.edit_placeholder),(!1===this.editable||this.editableFlagField&&!e[this.editableFlagField])&&i.attr("readonly",!0),i.val(t),i},filterValue:function(){if(this.extendedFilter){var t=this.filterControl.val();return t?((t=(t=t.replace(/^\s+|\s+$/g,"")).split(/\s/).join("|")).indexOf("*")>-1&&(t="^("+t.replace(/\*/g,".*")+")$"),new RegExp(t,"i")):null}return this.filterControl.val()},setFilterValue:function(t){if(null!==this.filterControl&&void 0!==this.filterControl&&(this.filterControl.val()?this.filterControl.val():void 0)!==t){this.filterControl.val(t);var e={columnName:this.name,value:t},i=this._grid;i._callEventHandler(i.onFilterChanged,e)}},insertValue:function(){return this.insertControl.val()},editValue:function(){return this.editControl.val()},_createTextBox:function(){var i=e("<input>").attr("type","text");return t.fieldsClasses.text&&i.attr("class",t.fieldsClasses.text),i}}),t.fields.text=t.TextField=r,t.filterExtendedString=function(t,e){return!e||null!==t&&void 0!==t&&("string"==typeof e?t.toLowerCase().indexOf(e.toLowerCase())>-1:e.test(t))}}(jsGrid,jQuery),function(jsGrid,$,undefined){var TextField=jsGrid.TextField;function NumberField(t){TextField.call(this,t)}NumberField.prototype=new TextField({sorter:"number",align:"right",readOnly:!1,valueType:"integer",minValue:undefined,maxValue:undefined,valueStep:undefined,summaryLabel:"Sum",maximumLabel:"Max",minimumLabel:"Min",meanLabel:"Mean",stdDevLabel:"Std.Dev.",summaryTemplate:function(){return this.summaryControl=$("<div>").append(this.title===undefined||null===this.title?this.name:this.title),this.summaryControl},filterValue:function(){return this.filterControl.val()?"integer"===this.valueType?parseInt(this.filterControl.val()||0,10):parseFloat(this.filterControl.val()||0):undefined},setFilterValue:function(t){if(null!==this.filterControl&&this.filterControl!==undefined&&this.filterValue()!==t){this.filterControl.val(t);var e={columnName:this.name,value:t},i=this._grid;i._callEventHandler(i.onFilterChanged,e)}},insertValue:function(){return this.insertControl.val()?"integer"===this.valueType?parseInt(this.insertControl.val()||0,10):parseFloat(this.insertControl.val()||0):undefined},editValue:function(){return this.editControl.val()?"integer"===this.valueType?parseInt(this.editControl.val()||0,10):parseFloat(this.editControl.val()||0):undefined},_computeSummaryValues(t){var e=0,i=0,n=t.reduce((t,e)=>e!==undefined&&null!==e?Math.max(t,e):t),r=n;t.forEach(function(t){t!==undefined&&null!==t&&(e+=t,i++,t<r&&(r=t))});var s=null,a=null;if(i>0){s=e/i;var o=0;t.forEach(function(t){t!==undefined&&null!==t&&(o+=(t-s)*(t-s))}),o/=i,a=Math.sqrt(o)}return{count:i,sum:e,max:n,min:r,mean:s,stdDev:a}},_number2string(t){var e=this.itemTemplate(t);return"number"==typeof e&&(e=e.toFixed(2)),e},summaryValue:function(t){var e=this._computeSummaryValues(t),i=this.summaryLabel+": "+this._number2string(e.sum),n=this.meanLabel+": "+this._number2string(e.mean),r=this.minimumLabel+": "+this._number2string(e.min),s=this.maximumLabel+": "+this._number2string(e.max),a=this.stdDevLabel+": "+this._number2string(e.stdDev);this.summaryControl.html(this.summaryText(i,n,s,r,a)),this.summaryControl.attr("title",this.summaryTooltipText(i,n,s,r,a))},summaryText:(t,e,i,n,r)=>t,summaryTooltipText:(t,e,i,n,r)=>t+"\r\n"+e+"\r\n"+i+"\r\n"+n+"\r\n"+r,_createTextBox:function(){var t=$("<input>").attr("type","number");return jsGrid.fieldsClasses.input&&t.attr("class",jsGrid.fieldsClasses.input),this.minValue!==undefined&&t.attr("min",this.minValue),this.maxValue!==undefined&&t.attr("max",this.maxValue),this.valueStep!==undefined&&t.attr("step",this.valueStep),t}}),jsGrid.fields.number=jsGrid.NumberField=NumberField,jsGrid.filterNumber=function(value,filter){return!filter||!!value&&("string"==typeof filter&&-1!==filter.search(/[<>=!]/g)?eval(`${value} ${filter}`):value===filter)}}(jsGrid,jQuery),function(t,e,i){var n=t.TextField;function r(t){n.call(this,t)}r.prototype=new n({rows:void 0,insertTemplate:function(){if(!this.inserting)return"";var t=this.insertControl=this._createTextArea();return!1===this.editable&&t.attr("readonly",!0),void 0!==this.defaultValue&&t.val(this.defaultValue),t},editTemplate:function(t,e){if(!this.editing)return this.itemTemplate.apply(this,arguments);var i=this.editControl=this._createTextArea();return(!1===this.editable||this.editableFlagField&&!e[this.editableFlagField])&&i.attr("readonly",!0),i.val(t),i},_createTextArea:function(){return $result=e("<textarea>"),t.fieldsClasses.textarea&&$result.attr("class",t.fieldsClasses.textarea),void 0!==this.rows&&$result.attr("rows",this.rows),$result}}),t.fields.textarea=t.TextAreaField=r}(jsGrid,jQuery),function(t,e,i){var n=t.NumberField,r="number",s="string";function a(t){if(this.items=[],this.selectedIndex=-1,this.valueField="",this.textField="",t.valueField&&t.items&&t.items.length){var e=t.items[0][t.valueField];this.valueType=typeof e===r?r:s}this.sortCollator=new Intl.Collator(window.navigator.userLanguage||window.navigator.language,{numeric:!0,sensitivity:"base"}),n.call(this,t)}a.prototype=new n({align:"center",valueType:r,allowEmpty:!0,filter_placeholder:"Select options to filter...",insert_placeholder:"Select an option to insert...",edit_placeholder:"Select an option to edit...",summaryLabel:"Summary",sorter:function(t,e){var i=this.itemTemplate(t),n=this.itemTemplate(e);return this.sortCollator.compare(i,n)},itemTemplate:function(t){var i,n=this.items,r=this.valueField,s=this.textField;i=r?e.grep(n,function(e,i){return e[r]===t})[0]||{}:n[t];var a=s?i[s]:i;return void 0===a||null===a?"":a},filterTemplate:function(){if(!this.filtering)return"";var t=this._grid,e=this.filterControl=this._createSelect("filter");e.attr("title",this.filter_placeholder);var i={columnName:this.name,field:this};return t._callEventHandler(t.onInitFilter,i),this.autosearch&&e.on("change",function(e){var i={columnName:this.name,value:this.filterValue()};t._callEventHandler(t.onFilterChanged,i),t.search()}.bind(this)),e},insertTemplate:function(){if(!this.inserting)return"";var t=this.insertControl=this._createSelect("insert");return t.attr("title",this.insert_placeholder),!1===this.editable&&t.attr("disabled","disabled"),void 0!==this.defaultValue&&t.val(value),t},editTemplate:function(t,e){if(!this.editing)return this.itemTemplate.apply(this,arguments);var i=this.editControl=this._createSelect("edit");return i.attr("title",this.edit_placeholder),(!1===this.editable||this.editableFlagField&&!e[this.editableFlagField])&&i.attr("disabled","disabled"),void 0!==t&&i.val(t),i},summaryTemplate:function(){var i=t.fieldsClasses.summarySelect?" class='"+t.fieldsClasses.summarySelect+"'":"";return this.summaryControl=e("<select"+i+">"),this.summaryControl},filterValue:function(){var t=this.filterControl.val();return void 0==t||null==t||""==t?null:this.valueType===r?parseInt(t||-1,10):t},setFilterValue:function(t){if(null!==this.filterControl&&void 0!==this.filterControl&&this.filterValue()!==t){this.filterControl.val(t);var e={columnName:this.name,value:t},i=this._grid;i._callEventHandler(i.onFilterChanged,e)}},insertValue:function(){var t=this.insertControl.val();return void 0==t||null==t||""==t?null:this.valueType===r?parseInt(t||-1,10):t},editValue:function(){var t=this.editControl.val();return void 0==t||null==t||""==t?null:this.valueType===r?parseInt(t||-1,10):t},summaryValue:function(t){var i=t.filter(t=>void 0===t||null===t||""===t),n=new Array(this.items.length).fill(0);t.forEach(function(t){for(var e=0;e<this.items.length;e++)this.items[e][this.valueField]===t&&n[e]++}.bind(this)),this.summaryControl.children("option").remove(),e("<option>").text(this.summaryLabel).css("display","none").appendTo(this.summaryControl);var r=this.emptyLabel+" ("+i.length+")";e("<option>").text(r).attr("disabled","disabled").appendTo(this.summaryControl),e.each(this.items,function(t,i){var s=this.valueField?i[this.valueField]:t,a=this.textField?i[this.textField]:i;void 0!==a&&null!==a&&""!==a&&(e("<option>").attr("value",s).attr("disabled","disabled").text(a+" ("+n[t]+")").appendTo(this.summaryControl),""!=r&&(r+="\r\n"),r+=a+" ("+n[t]+")")}.bind(this)),this.summaryControl.attr("title",r)},_createSelect:function(i){var n=t.fieldsClasses.select?" class='"+t.fieldsClasses.select+"'":"",r=e("<select"+n+">"),s=this.valueField,a=this.textField,o=this.selectedIndex;if("filter"!==i&&this.allowEmpty)e("<option>").attr("value","").text("").appendTo(r);return e.each(this.items,function(t,i){var n=s?i[s]:t,o=a?i[a]:i;e("<option>").attr("value",n).text(o).appendTo(r)}),r.prop("selectedIndex",o),r}}),t.fields.select=t.SelectField=a}(jsGrid,jQuery),function(t,e,i){var n=t.Field;function r(t){n.call(this,t)}r.prototype=new n({sorter:"number",align:"center",autosearch:!0,filter_placeholder:"Select state to filter...",insert_placeholder:"Check on/off to insert...",edit_placeholder:"Check on/off to edit...",summaryLabel:"Summary",checked_summary:"Checked",unchecked_summary:"Unchecked",itemTemplate:function(t){return this._createCheckbox().prop({checked:t,disabled:!0})},filterTemplate:function(){if(!this.filtering)return"";var t=this._grid,i=this.filterControl=this._createCheckbox();i.attr("title",this.filter_placeholder),i.prop({readOnly:!0,indeterminate:!0});var n={columnName:this.name,field:this};return t._callEventHandler(t.onInitFilter,n),i.on("click",function(){var t=e(this);t.prop("readOnly")?t.prop({checked:!1,readOnly:!1}):t.prop("checked")||t.prop({readOnly:!0,indeterminate:!0})}),this.autosearch&&i.on("click",function(){var e={columnName:this.name,value:this.filterValue()};t._callEventHandler(t.onFilterChanged,e),t.search()}.bind(this)),i},insertTemplate:function(){if(!this.inserting)return"";var t=this.insertControl=this._createCheckbox();return t.attr("title",this.insert_placeholder),!1===this.editable&&t.attr("disabled","disabled"),void 0!==this.defaultValue&&t.prop("checked",this.defaultValue),t},editTemplate:function(t,e){if(!this.editing)return this.itemTemplate.apply(this,arguments);var i=this.editControl=this._createCheckbox();return i.attr("title",this.edit_placeholder),(!1===this.editable||this.editableFlagField&&!e[this.editableFlagField])&&i.attr("disabled","disabled"),i.prop("checked",t),i},summaryTemplate:function(){var i=t.fieldsClasses.summarySelect?" class='"+t.fieldsClasses.summarySelect+"'":"";return this.summaryControl=e("<select"+i+">"),this.summaryControl},filterValue:function(){return this.filterControl.get(0).indeterminate?void 0:this.filterControl.is(":checked")},setFilterValue:function(t){if(null!==this.filterControl&&void 0!==this.filterControl&&this.filterValue()!==t){null===t?this.filterControl.prop({readOnly:!0,indeterminate:!0}):this.filterControl.prop({checked:t,readOnly:!1,indeterminate:!1});var e={columnName:this.name,value:t},i=this._grid;i._callEventHandler(i.onFilterChanged,e)}},insertValue:function(){return this.insertControl.is(":checked")},editValue:function(){return this.editControl.is(":checked")},summaryValue:function(t){var i=t.filter(t=>void 0===t||null===t||""===t),n=new Array(2).fill(0);t.forEach(function(t){!0===t?n[0]++:n[1]++}.bind(this)),this.summaryControl.children("option").remove(),e("<option>").text(this.summaryLabel).css("display","none").appendTo(this.summaryControl),e("<option>").text(this.emptyLabel+" ("+i.length+")").attr("disabled","disabled").appendTo(this.summaryControl),e("<option>").attr("value",1).attr("disabled","disabled").text(this.checked_summary+" ("+n[0]+")").appendTo(this.summaryControl),e("<option>").attr("value",0).attr("disabled","disabled").text(this.unchecked_summary+" ("+n[1]+")").appendTo(this.summaryControl);var r=this.emptyLabel+" ("+i.length+")\r\n"+this.checked_summary+" ("+n[0]+")\r\n"+this.unchecked_summary+" ("+n[1]+")";this.summaryControl.attr("title",r)},_createCheckbox:function(){var i=t.fieldsClasses.checkbox?" class='"+t.fieldsClasses.checkbox+"'":"";return e("<input"+i+">").attr("type","checkbox")}}),t.fields.checkbox=t.CheckboxField=r}(jsGrid,jQuery),function(t,e,i){var n=t.Field;function r(t){n.call(this,t),this.includeInDataExport=!1,this._configInitialized=!1,this.name||(this.name="jsgrid-control")}r.prototype=new n({css:"jsgrid-control-field",align:"center",width:80,filtering:!1,inserting:!1,editing:!1,sorting:!1,deletable:!0,deletableFlagField:"",buttonClass:"jsgrid-button",modeButtonClass:"jsgrid-mode-button",modeOnButtonClass:"jsgrid-mode-on-button",searchModeButtonClass:"jsgrid-search-mode-button",insertModeButtonClass:"jsgrid-insert-mode-button",editButtonClass:"jsgrid-edit-button",deleteButtonClass:"jsgrid-delete-button",searchButtonClass:"jsgrid-search-button",clearFilterButtonClass:"jsgrid-clear-filter-button",insertButtonClass:"jsgrid-insert-button",updateButtonClass:"jsgrid-update-button",cancelEditButtonClass:"jsgrid-cancel-edit-button",searchModeButtonTooltip:"Switch to searching",insertModeButtonTooltip:"Switch to inserting",editButtonTooltip:"Edit",deleteButtonTooltip:"Delete",searchButtonTooltip:"Search",clearFilterButtonTooltip:"Clear filter",insertButtonTooltip:"Insert",updateButtonTooltip:"Update",cancelEditButtonTooltip:"Cancel edit",editButton:!0,deleteButton:!0,clearFilterButton:!0,modeSwitchButton:!0,_initConfig:function(){this._hasFiltering=this._grid.filtering,this._hasInserting=this._grid.inserting,this._hasInserting&&this.modeSwitchButton&&(this._grid.inserting=!1),this._configInitialized=!0},headerTemplate:function(){this._configInitialized||this._initConfig();var t=this._hasFiltering,e=this._hasInserting;return this.modeSwitchButton&&(t||e)?t&&!e?this._createFilterSwitchButton():e&&!t?this._createInsertSwitchButton():this._createModeSwitchButton():""},itemTemplate:function(t,i){var n=e([]);return this.editButton&&this.editable&&(!this.editableFlagField||i[this.editableFlagField])&&(n=n.add(this._createEditButton(i))),this.deleteButton&&this.deletable&&(!this.deletableFlagField||i[this.deletableFlagField])&&(n=n.add(this._createDeleteButton(i))),n},filterTemplate:function(){var t=this._createSearchButton();return this.clearFilterButton?t.add(this._createClearFilterButton()):t},insertTemplate:function(){return this._createInsertButton()},editTemplate:function(t,e){return this.editButton&&this.editable&&(!this.editableFlagField||e[this.editableFlagField])?this._createUpdateButton().add(this._createCancelEditButton()):""},_createFilterSwitchButton:function(){return this._createOnOffSwitchButton("filtering",this.searchModeButtonClass,!0)},_createInsertSwitchButton:function(){return this._createOnOffSwitchButton("inserting",this.insertModeButtonClass,!1)},_createOnOffSwitchButton:function(t,i,n){var r=n,s=e.proxy(function(){a.toggleClass(this.modeOnButtonClass,r)},this),a=this._createGridButton(this.modeButtonClass+" "+i,"",function(e){r=!r,e.option(t,r),s()});return s(),a},_createModeSwitchButton:function(){var t=!1,i=e.proxy(function(){n.attr("title",t?this.searchModeButtonTooltip:this.insertModeButtonTooltip).toggleClass(this.insertModeButtonClass,!t).toggleClass(this.searchModeButtonClass,t)},this),n=this._createGridButton(this.modeButtonClass,"",function(e){t=!t,e.option("inserting",t),e.option("filtering",!t),i()});return i(),n},_createEditButton:function(t){return this._createGridButton(this.editButtonClass,this.editButtonTooltip,function(e,i){e.editItem(t),i.stopPropagation()})},_createDeleteButton:function(t){return this._createGridButton(this.deleteButtonClass,this.deleteButtonTooltip,function(e,i){e.deleteItem(t),i.stopPropagation()})},_createSearchButton:function(){return this._createGridButton(this.searchButtonClass,this.searchButtonTooltip,function(t){t.search()})},_createClearFilterButton:function(){return this._createGridButton(this.clearFilterButtonClass,this.clearFilterButtonTooltip,function(t){t._eachField(function(e){var i={columnName:e.name,value:null};t._callEventHandler(t.onFilterChanged,i)}),t.clearFilter(!0)})},_createInsertButton:function(){return this._createGridButton(this.insertButtonClass,this.insertButtonTooltip,function(t){t.insertItem().done(function(){t.clearInsert()})})},_createUpdateButton:function(){return this._createGridButton(this.updateButtonClass,this.updateButtonTooltip,function(t,e){t.updateItem(),e.stopPropagation()})},_createCancelEditButton:function(){return this._createGridButton(this.cancelEditButtonClass,this.cancelEditButtonTooltip,function(t,e){t.cancelEdit(),e.stopPropagation()})},_createGridButton:function(i,n,r){var s=this._grid,a=e("<button>");return t.fieldsClasses.button&&a.attr("class",t.fieldsClasses.button),a.addClass(this.buttonClass).addClass(i).attr({type:"button",title:n}).on("click",function(t){r(s,t)})},editValue:function(){return""},summaryValue:function(t){var e=this.totalLabel+": "+t.length+" "+this.rowsLabel;this.summaryControl.html(e),this.summaryControl.attr("title",e)}}),t.fields.control=t.ControlField=r}(jsGrid,jQuery),function(t,e,i){var n=t.Field;function r(t){n.call(this,t)}r.prototype=new n({name:"",title:null,css:"jsgrid-spacer-field",align:"",width:"auto",filtering:!1,inserting:!1,editing:!1,sorting:!1,resizing:!1,editable:!1,includeInDataExport:!1,headerTemplate:function(){return""},editTemplate:function(t,i){return e("<div>")},summaryTemplate:function(){return""},editValue:function(){return"&nbsp;"},summaryValue:function(t){return""}}),t.fields.spacer=t.SpacerField=r}(jsGrid,jQuery);